<script src="{{ '/assets/js/script.js' | relative_url }}"></script>

<script>
  // 다크모드 토글
  (function() {
    {% assign site_id = site.url | url_encode -%}

    var rootElement = document.documentElement,
        darkmodeToggle = document.querySelector(".nav__darkmode-toggle");

    darkmodeToggle.addEventListener("click", function(event) {
        rootElement.classList.toggle("is-darkmode");
        event.currentTarget.classList.toggle("nav__darkmode-toggle--active");

        if (rootElement.classList.contains("is-darkmode")) {
            sessionStorage.setItem("{{ site_id }}--DARKMODE", "Y");
        } else {
            sessionStorage.setItem("{{ site_id }}--DARKMODE", "N");
        }
    });
    
    document.addEventListener("DOMContentLoaded", function() {
        if (sessionStorage.getItem("{{ site_id }}--DARKMODE") === "Y") {
            rootElement.classList.add("is-darkmode");
            darkmodeToggle.classList.add("nav__darkmode-toggle--active");
        }
    });
  })();
</script>

{%- if site.search == true -%}
<script src="{{ '/assets/js/plugins/simple-jekyll-search.min.js' | relative_url }}"></script>
<script>
    var searchPlugin = SimpleJekyllSearch({
      json: '{{ "/" | relative_url }}search.json',
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      searchResultTemplate: '<li class="search__results__item"><a href="{url}" rel="permalink">{title}</a> <span class="search__results__date">{date}</span></li>',
      noResultsText: "{% if site.search_noResultsText %}{{ site.search_noResultsText }}{% else %}검색 결과를 찾을 수 없습니다.{% endif %}",
      limit: {% if site.search_limit %}{{ site.search_limit }}{% else %}20{% endif %}
  });
</script>
{%- endif -%}

{% include analytics.html %}